<?xml version="1.0" encoding="UTF-8" ?>

<beans xmlns="http://www.springframework.org/schema/beans"
        
       xmlns:cxf="http://camel.apache.org/schema/cxf"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans.xsd         
                           http://camel.apache.org/schema/spring 
                           http://camel.apache.org/schema/spring/camel-spring.xsd          
                           http://camel.apache.org/schema/cxf 
                           http://camel.apache.org/schema/cxf/camel-cxf.xsd" >  
    
    <camelContext id="_idFlujoCamelContext" streamCache="true" xmlns="http://camel.apache.org/schema/spring" >
    
        <propertyPlaceholder id="_idPlaceholder" location="classpath:application.properties" />
         
        <route id="_idFlujoCamelRoute" streamCache="true" > 
	        
	            <from id="_File_001" uri="{{ws.file.component}}" />    
	             
	            <doTry id="_idDoTry_01" >
	                <log  id="_Log_001"   message="EJECUTANDO 'file'... \n ${body}" />         
	                	                
	                <split id="_Split_001" >
	                    <xpath>/*/personas</xpath>  
 
		                <log  id="_Log_002"   message="IMPRIMIENTO 'REGISTROS PERSONAS'... \n ${body}" />   
                    </split>
                        
	                <split id="_Split_002" > 
	                    <xpath>/*/personas[2]</xpath> 
 
		                <log  id="_Log_002"   message="IMPRIMIENTO '2DO REGISTRO'... \n ${body}" />   
                    </split>
                    
	                <split id="_Split_003" > 
	                    <xpath>/*/personas[2]/*/text()</xpath> 
 
		                <log  id="_Log_003"   message="IMPRIMIENTO '2DO REGISTRO' (TEXTO)... \n ${body}" />   
                    </split>
                    
	                <split id="_Split_004" > 
	                    <xpath>/*/personas[*]/nombres/text()</xpath> 
 
		                <log  id="_Log_004"   message="IMPRIMIENTO 'REGISTROS', SOLO 'NOMBRES'... \n ${body}" />   
                    </split> 
                                        
	                <split id="_Split_005" > 
	                    <xpath>/*/personas[edad='40']/nombres/text()</xpath> 
 
		                <log  id="_Log_005"   message="IMPRIMIENTO 'NOMBRES' EN BASE A LA 'EDAD' - 'CONDICIONAL'... \n ${body}" />   
                    </split>     
                        
                        
                <doCatch id="_idDoCatch_01" >
                    <exception>java.lang.Exception</exception>  
                    
                    <handled>
                       <constant>true</constant>
                    </handled>
                    
                    <setBody id="_idSetBody_02" >  
                        <simple>${exception.getResponseBody}</simple>
                    </setBody>
                    
                    <log id="_Log_002" message="Exception: \n ${body}" />    
                </doCatch>
            </doTry>
            
        </route>
        
    </camelContext>
 
</beans>

